<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta content="Vineyard (v6d), a CNCF sandbox project, is an in-memory immutable data manager that provides **out-of-the-box high-level** abstraction and **zero-copy in-memory** sharing for distributed data in big data tasks, such as graph analytics (e.g., `GraphScope`_), numerical computing (e.g., `Mars`_), and machine learning." name="description" />
<meta content="distributed-systems, distributed, shared-memory, graph-analytics, in-memory-storage, big-data-analytics, distributed-comp" name="keywords" />

<meta property="og:title" content="Table of Contents" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="index.html" />
  
<meta property="og:description" content="Vineyard CI Coverage Docs FAQ Artifact HUB License CII Best Practices FOSSA Vineyard (v6d) is an in-memory immutable data manager that provides out-of-the-box high-level abstraction and zero-copy i..." />
  <link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Getting Started" href="notes/getting-started.html" />

    <link rel="shortcut icon" href="_static/vineyard.ico"/><meta name="generator" content="sphinx-5.0.2, furo 2022.06.21"/>
        <title>Vineyard</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="_static/css/brands.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/v4-shims.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/panels.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
  <script>
    document.body.dataset.theme = "light";
  </script>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="#"><div class="brand">Vineyard</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="#">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/vineyard-logo-h.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="notes/getting-started.html">Getting Started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="user-guide.html">User Guide</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="notes/install.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/architecture.html">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/objects.html">Internals of Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/data-accessing.html">Shared Data Accessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/streams.html">Streams in Vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/io-drivers.html">I/O Drivers</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorials.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials/distributed-learning.html">Distributed Learning with Vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/adding-custom-datatypes-cpp.html">Adding Custom Data Types in C++</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Integrations</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="integrations.html">Integrations</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="notes/dask.html">Dask on Vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/ml.html">Machine Learning with Vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/airflow.html">Airflow on Vineyard</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deployment</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="deployment.html">Deployment</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="notes/deploy-locally.html">Deploying on Linux/MacOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/deploy-docker.html">Deploying using Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/deploy-kubernetes.html">Deploying on Kubernetes</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="api-reference.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="notes/python-api.html">Python API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/cpp-api.html">C++ API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/ctl.html">Vineyard Cli</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="community.html">Join the Community</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="notes/contributing.html">Contributing to vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes/roadmap.html">Roadmap</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/v6d-io/v6d/edit/main/docs/index.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <h1 align="center" style="clear: both;">
    <img src="https://v6d.io/_static/vineyard-logo-rect.png" width="397" alt="vineyard">
</h1>
<p align="center">
    an in-memory immutable data manager
</p><p><a class="reference external" href="https://github.com/v6d-io/v6d/actions?workflow=Vineyard%20CI"><img alt="Vineyard CI" src="https://github.com/v6d-io/v6d/workflows/Vineyard%20CI/badge.svg" /></a> <a class="reference external" href="https://codecov.io/gh/v6d-io/v6d"><img alt="Coverage" src="https://codecov.io/gh/v6d-io/v6d/branch/main/graph/badge.svg" /></a> <a class="reference external" href="https://v6d.io"><img alt="Docs" src="https://img.shields.io/badge/docs-latest-brightgreen.svg" /></a> <a class="reference external" href="https://v6d.io/notes/faq.html"><img alt="FAQ" src="https://img.shields.io/badge/-FAQ-blue?logo=Read%20The%20Docs" /></a> <a class="reference external" href="https://artifacthub.io/packages/helm/vineyard/vineyard"><img alt="Artifact HUB" src="https://img.shields.io/endpoint?url=https://artifacthub.io/badge/repository/vineyard" /></a> <a class="reference external" href="https://github.com/v6d-io/v6d/blob/main/LICENSE"><img alt="License" src="https://img.shields.io/github/license/v6d-io/v6d" /></a> <a class="reference external" href="https://bestpractices.coreinfrastructure.org/projects/4902"><img alt="CII Best Practices" src="https://bestpractices.coreinfrastructure.org/projects/4902/badge" /></a> <a class="reference external" href="https://app.fossa.com/projects/git%2Bgithub.com%2Fv6d-io%2Fv6d?ref=badge_shield"><img alt="FOSSA" src="https://app.fossa.com/api/projects/git%2Bgithub.com%2Fv6d-io%2Fv6d.svg?type=shield" /></a></p>
<p>Vineyard (v6d) is an in-memory immutable data manager
that provides <strong>out-of-the-box high-level</strong> abstraction and <strong>zero-copy in-memory</strong> sharing for
distributed data in big data tasks, such as graph analytics (e.g., <a class="reference external" href="https://github.com/alibaba/GraphScope">GraphScope</a>), numerical
computing (e.g., <a class="reference external" href="https://github.com/mars-project/mars">Mars</a>), and machine learning.</p>
<a class="reference internal image-reference" href="https://v6d.io/_static/cncf-color.svg"><img alt="Vineyard is a CNCF sandbox project" src="https://v6d.io/_static/cncf-color.svg" width="400" /></a>
<p>Vineyard is a <a class="reference external" href="https://www.cncf.io/sandbox-projects/">CNCF sandbox project</a> and indeed made successful by its community.</p>
<div class="section" id="table-of-contents">
<h1>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="#what-is-vineyard">Overview</a></p></li>
<li><p><a class="reference external" href="#features">Features of vineyard</a></p>
<ul>
<li><p><a class="reference external" href="#in-memory-immutable-data-sharing">Efficient sharing for in-memory immutable data</a></p></li>
<li><p><a class="reference external" href="#out-of-the-box-high-level-data-abstraction">Out-of-the-box high level data structures</a></p></li>
<li><p><a class="reference external" href="#stream-pipelining">Pipelining using stream</a></p></li>
<li><p><a class="reference external" href="#drivers">I/O Drivers</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#try-vineyard">Getting started with vineyard</a></p></li>
<li><p><a class="reference external" href="#integrate-with-kubernetes">Vineyard on Kubernetes</a></p>
<ul>
<li><p><a class="reference external" href="#deployment-on-kubernetes">Deploying on Kubernetes</a></p></li>
<li><p><a class="reference external" href="#deployment-with-helm">Deploying using Helm</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#faq">Frequently asked questions</a></p></li>
<li><p><a class="reference external" href="#getting-involved">Getting involved in our community</a></p></li>
<li><p><a class="reference external" href="#acknowledgements">Third-party dependencies</a></p></li>
</ul>
</div>
<div class="section" id="what-is-vineyard">
<h1>What is vineyard<a class="headerlink" href="#what-is-vineyard" title="Permalink to this heading">#</a></h1>
<p>Vineyard is designed to enable zero-copy data sharing between big data systems.
Let’s begin with a typical machine learning task of <a class="reference external" href="https://github.com/L1aoXingyu/code-of-learn-deep-learning-with-pytorch/blob/master/chapter5_RNN/time-series/lstm-time-series.ipynb">time series prediction with LSTM</a>.
We can see that the task is divided into steps of works:</p>
<ul class="simple">
<li><p>First, we read the data from the file system as a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>.</p></li>
<li><p>Then, we apply some preprocessing jobs, such as eliminating null values to the dataframe.</p></li>
<li><p>After that, we define the model, and train the model on the processed dataframe
in PyTorch.</p></li>
<li><p>Finally, the performance of the model is evaluated.</p></li>
</ul>
<p>On a single machine, although pandas and PyTorch are two different systems targeting different tasks,
data can be shared between them efficiently with little extra-cost, with everything happening
end-to-end in a single python script.</p>
<img alt="Comparing the workflow with and without vineyard" src="https://v6d.io/_static/vineyard_compare.png" />
<p>What if the input data is too big to be processed on a single machine?
As illustrated on the left side of the figure, a common practice is to store the data as tables on
a distributed file system (e.g., HDFS), and replace <code class="docutils literal notranslate"><span class="pre">pandas</span></code> with ETL processes using SQL over a
big data system such as Hive and Spark. To share the data with PyTorch, the intermediate results are
typically saved back as tables on HDFS. This can bring some headaches to developers.</p>
<ol class="arabic simple">
<li><p>For the same task, users are forced to program for multiple systems (SQL &amp; Python).</p></li>
<li><p>Data could be polymorphic. Non-relational data, such as tensors, dataframes and graphs/networks (in <a class="reference external" href="https://github.com/alibaba/GraphScope">GraphScope</a>) are
becoming increasingly prevalent. Tables and SQL may not be best way to store/exchange or process them.
Having the data transformed from/to “tables” back and forth between different systems could be a huge
overhead.</p></li>
<li><p>Saving/loading the data to/from the external storage
requires lots of memory-copies and IO costs.</p></li>
</ol>
<p>Vineyard is designed to solve these issues by providing:</p>
<ol class="arabic simple">
<li><p><strong>In-memory</strong> distributed data sharing in a <strong>zero-copy</strong> fashion to avoid
introducing extra I/O costs by exploiting a shared memory manager derived from plasma.</p></li>
<li><p>Built-in <strong>out-of-the-box high-level</strong> abstraction to share the distributed
data with complex structures (e.g., distributed graphs)
with nearly zero extra development cost, while the transformation costs are eliminated.</p></li>
</ol>
<p>As shown in the right side of the above figure, we illustrate how to integrate
vineyard to solve the task in the big data context.</p>
<p>First, we use <a class="reference external" href="https://github.com/mars-project/mars">Mars</a> (a tensor-based unified framework for large-scale data
computation which scales Numpy, Pandas and Scikit-learn) to preprocess the raw data
just like the single machine solution do, and save the preprocessed dataframe into vineyard.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 86%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>single</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_csv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./data.csv&#39;</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>distributed</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mars.dataframe</span> <span class="k">as</span> <span class="nn">md</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">md</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;hdfs://server/data_full&#39;</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="c1"># after preprocessing, save the dataset to vineyard</span>
<span class="n">vineyard_distributed_tensor_id</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">to_vineyard</span><span class="p">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p>Then, we modify the
training phase to get the preprocessed data from vineyard. Here vineyard makes
the sharing of distributed data between <a class="reference external" href="https://github.com/mars-project/mars">Mars</a> and PyTorch just like a local
variable in the single machine solution.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 86%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>single</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_X</span><span class="p">,</span> <span class="n">data_Y</span> <span class="o">=</span> <span class="n">create_dataset</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>distributed</p></td>
<td><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="n">vineyard</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">vineyard_ipc_socket</span><span class="p">)</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">vineyard_distributed_tensor_id</span><span class="p">)</span><span class="o">.</span><span class="n">local_partition</span><span class="p">()</span>
<span class="n">data_X</span><span class="p">,</span> <span class="n">data_Y</span> <span class="o">=</span> <span class="n">create_dataset</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p>Finally, we run the training phase distributedly across the cluster.</p>
<p>From the example, we see that with vineyard, the task in the big data context
can be handled with only minor modifications to the single machine solution. Compare
with the existing approaches, the
I/O and transformation overheads are also eliminated.</p>
</div>
<div class="section" id="features">
<h1>Features<a class="headerlink" href="#features" title="Permalink to this heading">#</a></h1>
<div class="section" id="in-memory-immutable-data-sharing">
<h2>In-memory immutable data sharing<a class="headerlink" href="#in-memory-immutable-data-sharing" title="Permalink to this heading">#</a></h2>
<p>Vineyard is an in-memory immutable data manager, sharing immutable data across
different systems via shared memory without extra overheads. Vineyard eliminates
the overhead of serialization/deserialization and IO during exchanging immutable
data between systems.</p>
</div>
<div class="section" id="out-of-the-box-high-level-data-abstraction">
<h2>Out-of-the-box high level data abstraction<a class="headerlink" href="#out-of-the-box-high-level-data-abstraction" title="Permalink to this heading">#</a></h2>
<p>Computation frameworks usually have their own data abstractions for high-level concepts,
for example tensor could be <cite>torch.tensor</cite>, <cite>tf.Tensor</cite>, <cite>mxnet.ndarray</cite> etc., not to
mention that every <a class="reference external" href="https://github.com/alibaba/GraphScope">graph processing engine</a>
has its own graph structure representations.</p>
<p>The variety of data abstractions makes the sharing hard. Vineyard provides out-of-the-box
high-level data abstractions over in-memory blobs, by describing objects using hierarchical
metadatas. Various computation systems can utilize the built-in high level data abstractions
to exchange data with other systems in computation pipeline in a concise manner.</p>
</div>
<div class="section" id="stream-pipelining">
<h2>Stream pipelining<a class="headerlink" href="#stream-pipelining" title="Permalink to this heading">#</a></h2>
<p>A computation doesn’t need to wait all precedent’s result arrive before starting to work.
Vineyard provides stream as a special kind of immutable data for such pipelining scenarios.
The precedent job can write the immutable data chunk by chunk to vineyard, while maintaining
the data structure semantic, and the successor job reads shared-memory chunks from vineyard’s
stream without extra copy cost, then triggers it’s own work. The overlapping helps for
reducing the overall processing time and memory consumption.</p>
</div>
<div class="section" id="drivers">
<h2>Drivers<a class="headerlink" href="#drivers" title="Permalink to this heading">#</a></h2>
<p>Many big data analytical tasks have lots of boilerplate routines for tasks that
unrelated to the computation itself, e.g., various IO adaptors, data partition
strategies and migration jobs. As the data structure abstraction usually differs
between systems such routines cannot be easily reused.</p>
<p>Vineyard provides such common manipulate routines on immutable data as drivers.
Besides sharing the high level data abstractions, vineyard extends the capability
of data structures by drivers, enabling out-of-the-box reusable routines for the
boilerplate part in computation jobs.</p>
</div>
</div>
<div class="section" id="try-vineyard">
<h1>Try vineyard<a class="headerlink" href="#try-vineyard" title="Permalink to this heading">#</a></h1>
<p>Vineyard is distributed as a <a class="reference external" href="https://pypi.org/project/vineyard/">python package</a> and can be easily installed with <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip3 install vineyard
</pre></div>
</div>
<p>The latest version of online documentation can be found at <a class="reference external" href="https://v6d.io">https://v6d.io</a>.</p>
<p>If you want to build vineyard from source, please refer to <a class="reference external" href="https://github.com/v6d-io/v6d/blob/main/docs/notes/install.rst">Installation</a>, and refer to
<a class="reference external" href="https://github.com/v6d-io/v6d/blob/main/CONTRIBUTING.rst">Contributing</a> for how to build and run unittests locally.</p>
<p>Once installed, you can start a vineyard instance with:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python3 -m vineyard
</pre></div>
</div>
<p>For more details about connecting to a locally deployed vineyard instance, please refer to
<a class="reference external" href="https://v6d.io/notes/getting-started.html">Getting Started</a>.</p>
</div>
<div class="section" id="integrate-with-kubernetes">
<h1>Integrate with Kubernetes<a class="headerlink" href="#integrate-with-kubernetes" title="Permalink to this heading">#</a></h1>
<p>Vineyard helps share immutable data between different workloads, is a natural fit
to cloud-native computing. Vineyard could provide efficient distributed data sharing
in cloud-native environment by embracing cloud-native big data processing and Kubernetes
helps vineyard leverage the scale-in/out and scheduling ability of Kubernetes.</p>
<div class="section" id="deployment-on-kubernetes">
<h2>Deployment on Kubernetes<a class="headerlink" href="#deployment-on-kubernetes" title="Permalink to this heading">#</a></h2>
<p>For better leveraging the scale-in/out capability of Kubernetes for worker pods of
a data analytical job, vineyard could be deployed on Kubernetes to as a DaemonSet
in Kubernetes cluster. Vineyard pods shares memory with worker pods using a UNIX
domain socket with fine-grained access control.</p>
<p>The UNIX domain socket can be either mounted on <code class="docutils literal notranslate"><span class="pre">hostPath</span></code> or via a <code class="docutils literal notranslate"><span class="pre">PersistentVolumeClaim</span></code>.
When users bundle vineyard and the workload to the same pod, the UNIX domain socket
could also be shared using an <code class="docutils literal notranslate"><span class="pre">emptyDir</span></code>.</p>
<p><strong>Note</strong> that when deploying vineyard on Kubernetes, it usually can only be connected
from containers in the same pod, or pods on the same hosts.</p>
</div>
<div class="section" id="deployment-with-helm">
<h2>Deployment with Helm<a class="headerlink" href="#deployment-with-helm" title="Permalink to this heading">#</a></h2>
<p>Vineyard also has tight integration with Kubernetes and Helm. Vineyard can be deployed
with <code class="docutils literal notranslate"><span class="pre">helm</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>helm repo add vineyard https://vineyard.oss-ap-southeast-1.aliyuncs.com/charts/
helm install vineyard vineyard/vineyard
</pre></div>
</div>
<p>In the further vineyard will improve the integration with Kubernetes by abstract
vineyard objects as as Kubernetes resources (i.e., CRDs), and leverage a vineyard
operator to operate vineyard cluster.</p>
</div>
</div>
<div class="section" id="faq">
<h1>FAQ<a class="headerlink" href="#faq" title="Permalink to this heading">#</a></h1>
<p>Vineyard shares many similarities with other opensource projects, but still differs
a lot with them. We are frequently asked with the following questions about vineyard,</p>
<ul>
<li><p>Q: Can clients look at the data while the stream is being filled?</p>
<p>One piece of data for multiple clients is one of the target scenarios as the
data live in vineyard is <em>immutable</em>, and multiple clients can safely consume
the same piece of data by memory sharing, without the extra cost and extra memory
usage of copying data back and forth.</p>
</li>
<li><p>Q: How vineyard avoids serialization/deserialization between systems in different languages?</p>
<p>Vineyard provides higher-level data abstractions (e.g., ndarrays, dataframes) that
could be shared in a natural way between different processes.</p>
</li>
<li><p>… …</p></li>
</ul>
<p>For more detailed information, please refer to our <a class="reference external" href="https://v6d.io/notes/faq.html">FAQ</a> page.</p>
</div>
<div class="section" id="getting-involved">
<h1>Getting involved<a class="headerlink" href="#getting-involved" title="Permalink to this heading">#</a></h1>
<ul class="simple">
<li><p>Join in the <a class="reference external" href="https://slack.cncf.io/">CNCF Slack</a> and navigate to the <code class="docutils literal notranslate"><span class="pre">#vineyard</span></code> channel for discussion.</p></li>
<li><p>Read <a class="reference external" href="https://github.com/v6d-io/v6d/blob/main/CONTRIBUTING.rst">contribution guide</a>.</p></li>
<li><p>Please report bugs by submitting a <a class="reference external" href="https://github.com/v6d-io/v6d/issues/new">GitHub issue</a> or ask me anything in <a class="reference external" href="https://github.com/v6d-io/v6d/discussions/new">Github discussion</a>.</p></li>
<li><p>Submit contributions using pull requests.</p></li>
</ul>
<p>Thank you in advance for your contributions to vineyard!</p>
</div>
<div class="section" id="acknowledgements">
<h1>Acknowledgements<a class="headerlink" href="#acknowledgements" title="Permalink to this heading">#</a></h1>
<p>We thank the following excellent open-source projects:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/apache/arrow">apache-arrow</a>, a cross-language development platform for in-memory analytics;</p></li>
<li><p><a class="reference external" href="https://github.com/boostorg/leaf">boost-leaf</a>, a C++ lightweight error augmentation framework;</p></li>
<li><p><a class="reference external" href="https://github.com/Manu343726/ctti">ctti</a>, a C++ compile-time type information library;</p></li>
<li><p><a class="reference external" href="http://gee.cs.oswego.edu/dl/html/malloc.htmlp">dlmalloc</a>, Doug Lea’s memory allocator;</p></li>
<li><p><a class="reference external" href="https://github.com/etcd-cpp-apiv3/etcd-cpp-apiv3">etcd-cpp-apiv3</a>, a C++ API for etcd’s v3 client API;</p></li>
<li><p><a class="reference external" href="https://github.com/skarupke/flat_hash_map">flat_hash_map</a>, an efficient hashmap implementation;</p></li>
<li><p><a class="reference external" href="https://github.com/alainesp/wy">wyhash</a>, C++ wrapper around wyhash and wyrand;</p></li>
<li><p><a class="reference external" href="https://github.com/jemalloc/jemalloc">jemalloc</a> a general purpose <code class="docutils literal notranslate"><span class="pre">malloc(3)</span></code> implementation.</p></li>
<li><p><a class="reference external" href="https://github.com/nlohmann/json">nlohmann/json</a>, a json library for modern c++.</p></li>
<li><p><a class="reference external" href="https://github.com/pybind/pybind11">pybind11</a>, a library for seamless operability between C++11 and Python;</p></li>
<li><p><a class="reference external" href="https://github.com/dask/s3fs">s3fs</a>, a library provide a convenient Python filesystem interface for S3.</p></li>
<li><p><a class="reference external" href="https://github.com/oneapi-src/oneTBB">tbb</a> a C++ library for threading building blocks.</p></li>
</ul>
</div>
<div class="section" id="license">
<h1>License<a class="headerlink" href="#license" title="Permalink to this heading">#</a></h1>
<p><strong>Vineyard</strong> is distributed under <a class="reference external" href="https://github.com/v6d-io/v6d/blob/main/LICENSE">Apache License 2.0</a>. Please note that
third-party libraries may not have the same license as vineyard.</p>
<p><a class="reference external" href="https://app.fossa.com/projects/git%2Bgithub.com%2Fv6d-io%2Fv6d?ref=badge_large"><img alt="FOSSA Status" src="https://app.fossa.com/api/projects/git%2Bgithub.com%2Fv6d-io%2Fv6d.svg?type=large" /></a></p>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="notes/getting-started.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Getting Started</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2019-2022, The Vineyard Authors
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link fa fa-solid fa-github fa-2x" href="https://github.com/v6d-io/v6d" aria-label="GitHub"></a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>